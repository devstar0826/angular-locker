/*! angular-locker v0.6.3 | (c) 2014 @tymondesigns | https://github.com/tymondesigns/angular-locker */
!function(e,t){"use strict";function r(r,s){this._driver=r,this._namespace=s,this._registeredDrivers={local:e.localStorage,session:e.sessionStorage},this._separator=".",this._getPrefix=function(e){return this._namespace+this._separator+e},this._resolveDriver=function(e){return this._registeredDrivers.hasOwnProperty(e)||n('The driver "'+e+'" was not found. Defaulting to local.'),this._registeredDrivers[e]||this._registeredDrivers.local},this._serialize=function(e){try{return t.toJson(e)}catch(r){return e}},this._unserialize=function(e){try{return t.fromJson(e)}catch(r){return e}},this._setItem=function(e,t){try{this._driver.setItem(this._getPrefix(e),this._serialize(t))}catch(r){n(-1!==["QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED","QuotaExceededError"].indexOf(r.name)?"Your browser storage quota has been exceeded":'Could not add item with key "'+e+'"')}},this._getItem=function(e){return this._unserialize(this._driver.getItem(this._getPrefix(e)))},this._exists=function(e){return this._driver.hasOwnProperty(this._getPrefix(i(e)))},this._removeItem=function(e){return this._exists(e)?(this._driver.removeItem(this._getPrefix(e)),!0):!1}}var i=function(e){return t.isFunction(e)?e():e},n=function(e){throw new Error(e)};r.prototype={put:function(e,r){if(!e)return!1;if(e=i(e),t.isObject(e))t.forEach(e,function(e,t){this._setItem(t,e)},this);else{if(!t.isDefined(r))return!1;this._setItem(e,i(r))}return this},add:function(e,t){return this.has(e)?!1:(this.put(e,t),!0)},get:function(e,r){if(t.isArray(e)){var i={};return t.forEach(e,function(e){this.has(e)&&(i[e]=this._getItem(e))},this),i}return this.has(e)?this._getItem(e):2===arguments.length?r:void 0},has:function(e){return this._exists(e)},forget:function(e){return e=i(e),t.isArray(e)?t.forEach(e,function(e){this._removeItem(e)},this):this._removeItem(e),this},pull:function(e,t){var r=this.get(e,t);return this.forget(e),r},all:function(){var e={};return t.forEach(this._driver,function(t,r){var i=r.split(this._separator);i.length>1&&i[0]===this._namespace&&(i.splice(0,1),r=i.join(this._separator)),this.has(r)&&(e[r]=this.get(r))},this),e},clean:function(){return this.forget(Object.keys(this.all())),this},empty:function(){return this._driver.clear(),this},count:function(){return Object.keys(this.all()).length},driver:function(e){return new r(this._resolveDriver(e),this._namespace)},getDriver:function(){return this._driver},namespace:function(e){return new r(this._driver,e)},getNamespace:function(){return this._namespace},supported:function(e){var t="l";try{return this._resolveDriver(e||"local").setItem(t,t),this._resolveDriver(e||"local").removeItem(t),!0}catch(r){return!1}}},t.module("angular-locker",[]).provider("locker",function(){var t={driver:"local",namespace:"locker"},n={local:new r(e.localStorage,t.namespace),session:new r(e.sessionStorage,t.namespace)};return{setDefaultDriver:function(e){return t.driver=i(e),this},getDefaultDriver:function(){return t.driver},setDefaultNamespace:function(e){return t.namespace=i(e),this},getDefaultNamespace:function(){return t.namespace},$get:function(){return n[t.driver]}}})}(window,window.angular);