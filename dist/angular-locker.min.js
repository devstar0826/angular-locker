/*! angular-locker v0.6.3 | (c) 2014 @tymondesigns | https://github.com/tymondesigns/angular-locker */
!function(t,e){"use strict";var r=function(t){try{return e.toJson(t)}catch(r){return t}},i=function(t){try{return e.fromJson(t)}catch(r){return t}},n=function(t){return"function"==typeof t?t():t},s=function(e,s){this._driver=e,this._namespace=s,this._registeredDrivers={local:t.localStorage,session:t.sessionStorage},this._separator=".",this._getPrefix=function(t){return this._namespace+this._separator+t},this._resolveDriver=function(t){return this._registeredDrivers.hasOwnProperty(t)||console.warn('angular-locker - The driver "'+t+'" was not found. Defaulting to local.'),this._registeredDrivers[t]||this._registeredDrivers.local},this._setItem=function(t,e){try{this._driver.setItem(this._getPrefix(t),r(e))}catch(i){-1!==["QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED","QuotaExceededError"].indexOf(i.name)?console.warn("angular-locker - Your browser storage quota has been exceeded"):console.warn('angular-locker - Could not add item with key "'+t+'"',i)}},this._getItem=function(t){return i(this._driver.getItem(this._getPrefix(t)))},this._exists=function(t){return this._driver.hasOwnProperty(this._getPrefix(n(t)))},this._removeItem=function(t){return this._exists(t)?(this._driver.removeItem(this._getPrefix(t)),!0):!1}};s.prototype={put:function(t,r){if(!t)return!1;if(t=n(t),e.isObject(t))e.forEach(t,function(t,e){this._setItem(e,t)},this);else{if(!r)return!1;this._setItem(t,n(r))}return this},add:function(t,e){return this.has(t)?!1:(this.put(t,e),!0)},get:function(t,r){if(!e.isArray(t))return this.has(t)?this._getItem(t):2===arguments.length?r:void 0;var i={};return e.forEach(t,function(t){this.has(t)&&(i[t]=this._getItem(t))},this),i},has:function(t){return this._exists(t)},remove:function(t){return t=n(t),e.isArray(t)?e.forEach(t,function(t){this._removeItem(t)},this):this._removeItem(t),this},pull:function(t,e){var r=this.get(t,e);return this.remove(t),r},all:function(){var t={};return e.forEach(this._driver,function(e,r){var i=r.split(this._separator);i.length>1&&i[0]===this._namespace&&(i.splice(0,1),r=i.join(this._separator)),this.has(r)&&(t[r]=this.get(r))},this),t},clean:function(){return e.forEach(this._driver,function(t,e){this._removeItem(e)},this),this},empty:function(){return this._driver.clear(),this},count:function(){var t,e=this.all(),r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},driver:function(t){return this._driver=this._resolveDriver(t),this},getDriver:function(){return this._driver},namespace:function(t){return this._namespace=t,this},supported:function(){var t="t";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}},e.module("angular-locker",[]).provider("locker",function(){var e="local",r="locker",i={local:function(e){return new s(t.localStorage,e)},session:function(e){return new s(t.sessionStorage,e)}};return{setDefaultDriver:function(t){return e=n(t),this},getDefaultDriver:function(){return e},setDefaultNamespace:function(t){return r=n(t),this},getDefaultNamespace:function(){return r},$get:function(){return i[e](r)}}})}(window,window.angular);