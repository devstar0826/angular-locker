/*! angular-locker v0.6.3 | (c) 2014 @tymondesigns | https://github.com/tymondesigns/angular-locker */
!function(t,e){"use strict";var r=function(t){try{return e.toJson(t)}catch(r){return t}},n=function(t){try{return e.fromJson(t)}catch(r){return t}},i=function(t){return"function"==typeof t?t():t},o=function(e,o){this._driver=e,this._namespace=o,this._separator=".",this._getPrefix=function(t){return this._namespace+this._separator+t},this._resolveDriver=function(e){var r={local:t.localStorage,session:t.sessionStorage};return r[e]},this._setItem=function(t,e){try{this._driver.setItem(this._getPrefix(t),r(e))}catch(n){-1!==["QUOTA_EXCEEDED_ERR","NS_ERROR_DOM_QUOTA_REACHED","QuotaExceededError"].indexOf(n.name)?console.warn("angular-locker - Your browser storage quota has been exceeded"):console.warn('angular-locker - Could not add item with key "'+t+'"',n)}},this._getItem=function(t){return n(this._driver.getItem(this._getPrefix(t)))},this._exists=function(t){return this._driver.hasOwnProperty(this._getPrefix(i(t)))},this._removeItem=function(t){return this._exists(t)?(this._driver.removeItem(this._getPrefix(t)),!0):!1}};o.prototype.put=function(t,r){if(!t)return!1;if(t=i(t),e.isObject(t))e.forEach(t,function(t,e){this._setItem(e,t)});else{if(!r)return!1;this._setItem(t,i(r))}return this},o.prototype.add=function(t,e){return this.has(t)?!1:(this.put(t,e),!0)},o.prototype.get=function(t,r){if(!e.isArray(t))return this.has(t)?this._getItem(t):2===arguments.length?r:void 0;var n={};return e.forEach(t,function(t){this.has(t)&&(n[t]=this._getItem(t))},this),n},o.prototype.has=function(t){return this._exists(t)},o.prototype.remove=function(t){return t=i(t),e.isArray(t)?e.forEach(t,function(t){this._removeItem(t)}):this._removeItem(t),this},o.prototype.pull=function(t,e){var r=this.get(t,e);return this.remove(t),r},o.prototype.all=function(){var t={};return e.forEach(this._driver,function(e,r){var n=r.split(this._separator);n.length>1&&n[0]===this._namespace&&(n.splice(0,1),r=n.join(this._separator)),this.has(r)&&(t[r]=this.get(r))},this),t},o.prototype.clean=function(){return e.forEach(this._driver,function(t,e){this._removeItem(e)}),this},o.prototype.empty=function(){return this._driver.clear(),this},o.prototype.count=function(){var t,e=this.all(),r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r},o.prototype.driver=function(t){return this._driver=this._resolveDriver(t),this},o.prototype.namespace=function(t){return this._namespace=t,this},o.prototype.supported=function(){var t="t";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}},e.module("angular-locker",[]).provider("locker",function(){var e="local",r="locker",n={local:function(e){return new o(t.localStorage,e)},session:function(e){return new o(t.sessionStorage,e)}},s=function(t){return n[t||e](r)};return{setDefaultDriver:function(t){return e=i(t),this},getDefaultDriver:function(){return e},setDefaultNamespace:function(t){return r=i(t),this},getDefaultNamespace:function(){return r},$get:function(){return s()}}})}(window,window.angular);